<h2>Demos</h2>

<div class="index-demos">

  <%= flash[:upload] %>
  
  <% if current_user %>
    <div class="dark-box asset-upload rounded_4" style="display:none">
      <h3>Adicionar demo</h3>
      <% form_for @demo, :html => { :multipart => true } do |f| %>
        <p><%= f.file_field :data %></p>
        <p>
          <%= f.label :title, "Título", :class => "smooth" %><br/>
          <%= f.text_field :title, :style => "width:100%" %>
        </p>
        <p>
          <%= f.label :description, "Descrição", :class => "smooth" %><br/>
          <%= f.text_area :description %>
        </p>
        <p style="float:left"><%= link_to_function "Cancelar", :id => "cancel-upload" %></p>
        <p style="text-align:right"><%= f.submit "Enviar", :class => "awesome blue" %></p>
      <% end %>
    </div>
    <div class="new-asset-button">
      <%= link_to_function "Adicionar demo", :id => "new-demo", :class => "awesome medium blue" %>
    </div>
  <% else %>
    <div class="hint" style="text-align:center">
      Você precisa <%= link_to "logar", new_user_session_path %> para efetuar upload de demos
    </div>
    <br/>
  <% end %>

  <% if @demos.any? %>
      <% for demo in @demos %>
        <%= render demo, :title => true %>
      <% end %>
  <% end %>

</div>


<script language="javascript">

  $("#new-demo").click(function() {
    $(".asset-upload").toggle(); 
  });
  $("#cancel-upload").click(function() {
    $(".asset-upload").hide(); 
  });

</script>